<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéâ Happy Birthday!</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#0b1324; --muted:#6b7280;
    --g1:#ffb6e6; --g2:#b6d4ff; --g3:#ffe9a3;
    --glass: rgba(255,255,255,.55); --glass-border: rgba(255,255,255,.35);
    --neon1:#a78bfa; --neon2:#60a5fa; --neon3:#f472b6;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    background:
      radial-gradient(1200px 800px at 10% 10%, var(--g1), transparent),
      radial-gradient(1200px 800px at 90% 10%, var(--g2), transparent),
      radial-gradient(1200px 800px at 50% 100%, var(--g3), transparent),
      linear-gradient(180deg,#fafafa,#f3f4f6);
    animation: drift 18s linear infinite;
    display:flex; align-items:center; justify-content:center; padding:24px; overflow:hidden;
  }
  @keyframes drift{
    0%{background-position:0 0,0 0,0 0,0 0}
    50%{background-position:60px -40px,-60px 40px,0 80px,0 0}
    100%{background-position:0 0,0 0,0 0,0 0}
  }

  /* Parallax halos */
  .halo{position:fixed; inset:auto auto 10% -6%; width:60vmin; height:60vmin; z-index:0;
        background:radial-gradient(closest-side,rgba(164,120,255,.55),transparent 70%);
        filter:blur(18px); animation: float 9s ease-in-out infinite;}
  .halo.h2{left:auto; right:-6%; bottom:15%; background:radial-gradient(closest-side,rgba(96,165,250,.55),transparent 70%); animation-delay:1.2s}
  @keyframes float{50%{transform:translateY(-10px) translateX(10px)}}

  /* Canvas fireworks on top layer */
  #fx{position:fixed; inset:0; pointer-events:none; z-index:4}

  /* Balloons layer (behind card) */
  .balloons{position:fixed; inset:0; overflow:hidden; z-index:1; pointer-events:none}
  .balloon{
    position:absolute; bottom:-120px; width:48px; height:60px; border-radius:50% 50% 50% 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.2) 30%, rgba(0,0,0,.05) 60%), var(--color,#ff9bd2);
    box-shadow: inset -8px -12px 20px rgba(0,0,0,.06);
    animation: rise linear infinite;
  }
  .balloon::after{content:""; position:absolute; width:2px; height:80px; background:rgba(0,0,0,.12); left:50%; top:60px}
  @keyframes rise{ to{ transform:translateY(-120vh) } }

  /* Card */
  .card{
    position:relative; z-index:3; width:min(980px,100%);
    background:var(--glass); border:1px solid var(--glass-border); border-radius:28px;
    box-shadow:0 24px 70px rgba(17,24,39,.16), inset 0 1px 1px rgba(255,255,255,.45);
    backdrop-filter: blur(18px) saturate(120%); -webkit-backdrop-filter: blur(18px) saturate(120%);
    padding:32px; overflow:hidden; animation: pop .6s ease-out both;
  }
  @keyframes pop{from{opacity:0; transform:translateY(12px) scale(.98)}to{opacity:1; transform:none}}

  /* Title neon 3D */
  .title{
    margin:0 0 6px; font-weight:900; font-size:clamp(30px,4.8vw,46px); line-height:1.15;
    background:linear-gradient(90deg,var(--neon1),var(--neon2),var(--neon3));
    -webkit-background-clip:text; background-clip:text; color:transparent; background-size:300% 100%;
    text-shadow: 0 1px 0 rgba(255,255,255,.6), 0 6px 20px rgba(99,102,241,.25);
    animation: shine 8s ease infinite;
  }
  @keyframes shine{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  .sub{margin:4px 0 18px; color:var(--muted)}

  .btns{display:flex; gap:12px; flex-wrap:wrap; margin:10px 0 18px}
  .btn{
    appearance:none; border:0; cursor:pointer; font-weight:700; padding:11px 18px; border-radius:14px;
    color:#111827; background:linear-gradient(180deg,#eef2ff,#e0e7ff);
    box-shadow:0 2px 0 #c7d2fe, 0 12px 26px rgba(99,102,241,.18); position:relative; overflow:hidden;
    transition:transform .04s, box-shadow .2s;
  }
  .btn:active{transform:translateY(2px); box-shadow:0 0 0 #c7d2fe}
  .btn::after{content:""; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,.55),transparent);
              transform:translateX(-100%); transition:transform .8s; mix-blend-mode:soft-light}
  .btn:hover::after{transform:translateX(100%)}

  .vwrap{position:relative; border-radius:18px; overflow:hidden; margin-top:8px;
         box-shadow:0 18px 46px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.35);}
  .vwrap::before{content:""; position:absolute; inset:-1px; border-radius:20px; pointer-events:none;
                 background: conic-gradient(from 0deg at 50% 50%, rgba(255,255,255,.14), rgba(255,255,255,0) 25%, rgba(255,255,255,.14) 50%, rgba(255,255,255,0) 75%, rgba(255,255,255,.14));
                 filter:blur(12px); opacity:.6;}
  video{width:100%; display:block; background:#000}

  /* Wish text with typewriter */
  #wish{ display:none; margin-top:18px; text-align:center; color:#0b1324; font-weight:900;
         font-size:clamp(18px,2.8vw,24px); opacity:0; transform:translateY(8px) scale(.98) }
  #wish.show{ display:block; animation: fadeUp .6s cubic-bezier(.2,.75,.25,1) forwards, typing 3.2s steps(30,end) 0.25s forwards }
  @keyframes fadeUp{to{opacity:1; transform:translateY(0) scale(1)}}
  @keyframes typing{from{clip-path: inset(0 100% 0 0)} to{clip-path: inset(0 0 0 0)}}
</style>
</head>
<body>
<div class="halo"></div><div class="halo h2"></div>
<div class="balloons" id="balloons"></div>
<canvas id="fx"></canvas>

<main class="card">
  <h1 class="title">üéâ Ch√∫c m·ª´ng sinh nh·∫≠t, <span id="name">B·∫°n th√¢n</span>!</h1>
  <p class="sub">M·ªôt trang nh·ªè xinh ch·ªâ d√†nh ri√™ng cho b·∫°n üíñ</p>

  <div class="btns">
    <button class="btn" id="playBtn">‚ñ∂Ô∏è Xem video</button>
    <button class="btn" id="replayBtn" title="Ch·∫°y l·∫°i hi·ªáu ·ª©ng">üîÅ Ch·∫°y l·∫°i</button>
  </div>

  <div class="vwrap">
    <video id="vid" controls playsinline preload="metadata"
           controlsList="nodownload noplaybackrate noremoteplayback"
           poster="POSTER_URL">
      <source src="VIDEO_URL" type="video/mp4" />
      Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
    </video>
  </div>

  <p id="wish">Ch√∫c b·∫°n tu·ªïi m·ªõi th·∫≠t nhi·ªÅu s·ª©c kh·ªèe, ni·ªÅm vui v√† th√†nh c√¥ng! üéÇ‚ú®</p>
</main>

<script>
/* ======= Balloons (layer behind card) ======= */
(function spawnBalloons(){
  const wrap = document.getElementById('balloons');
  const colors = ['#ff9bd2','#a78bfa','#60a5fa','#fbbf24','#34d399'];
  for(let i=0;i<10;i++){
    const b = document.createElement('div'); b.className='balloon';
    b.style.left = Math.random()*100+'%';
    b.style.animationDuration = 10 + Math.random()*12 + 's';
    b.style.animationDelay = (-Math.random()*8)+'s';
    b.style.setProperty('--color', colors[i%colors.length]);
    b.style.transform = `scale(${.7 + Math.random()*0.8})`;
    wrap.appendChild(b);
  }
})();

/* ======= Canvas Fireworks (trails + sparkles) ======= */
const canvas = document.getElementById('fx'), ctx = canvas.getContext('2d');
let W=innerWidth,H=innerHeight,particles=[],running=false, rafId=null;
function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
addEventListener('resize', resize); resize();

class Particle{
  constructor(x,y,vx,vy,color,life=70,size=2){ Object.assign(this,{x,y,vx,vy,color,life,maxLife:life,size,trail:[]}); }
  update(){ this.trail.push({x:this.x,y:this.y}); if(this.trail.length>10) this.trail.shift();
            this.x+=this.vx; this.y+=this.vy; this.vy+=0.02; this.vx*=0.996; this.vy*=0.996; this.life--; }
  draw(){
    for(let i=0;i<this.trail.length;i++){
      const t=this.trail[i], a=i/this.trail.length*0.4;
      ctx.fillStyle=`rgba(${this.color.r},${this.color.g},${this.color.b},${a})`;
      ctx.beginPath(); ctx.arc(t.x,t.y,this.size,0,Math.PI*2); ctx.fill();
    }
    const a=Math.max(this.life/this.maxLife,0);
    ctx.fillStyle=`rgba(${this.color.r},${this.color.g},${this.color.b},${a})`;
    ctx.beginPath(); ctx.arc(this.x,this.y,this.size+0.7,0,Math.PI*2); ctx.fill();
    ctx.fillStyle=`rgba(255,255,255,${a*.8})`; ctx.fillRect(this.x-0.5,this.y-0.5,1,1);
  }
}
function hslToRgb(h, s, l){ const a=s*Math.min(l,1-l); const f=n=>{const k=(n+h*12)%12;const c=l-a*Math.max(Math.min(k-3,9-k,1),-1);return Math.round(255*c)}; return {r:f(0),g:f(8),b:f(4)}; }
function burst(x,y,amount=70,speed=2.4){
  for(let i=0;i<amount;i++){
    const ang=Math.random()*Math.PI*2, sp=speed+Math.random()*1.3;
    const hue=Math.floor(Math.random()*360), col=hslToRgb(hue/360,0.9,0.55);
    particles.push(new Particle(x,y,Math.cos(ang)*sp,Math.sin(ang)*sp,col, 80+Math.random()*30, 2+Math.random()*1.6));
  }
}
function loop(){ rafId=requestAnimationFrame(loop); ctx.clearRect(0,0,W,H); ctx.fillStyle='rgba(255,255,255,0.08)'; ctx.fillRect(0,0,W,H);
  particles=particles.filter(p=>p.life>0); for(const p of particles){p.update();p.draw();} }
function startFireworks(duration=4000, interval=240, burstsPerTick=2){
  if(!running){ running=true; loop(); }
  const timer=setInterval(()=>{
    for(let i=0;i<burstsPerTick;i++){ burst(Math.random()*W, 40+Math.random()*(H*0.45)); }
  }, interval);
  setTimeout(()=>{ clearInterval(timer); setTimeout(()=>{ if(particles.length===0){ stopFireworks(); } },1200); }, duration);
}
function stopFireworks(){ running=false; if(rafId){cancelAnimationFrame(rafId); rafId=null;} ctx.clearRect(0,0,W,H); particles.length=0; }

/* ======= Flow: fireworks -> video -> wish (typewriter) ======= */
const video = document.getElementById('vid');
const wish  = document.getElementById('wish');

function startFlow(){
  // reset wish
  wish.classList.remove('show'); wish.style.display='none';
  // fireworks ~4s
  startFireworks(4000, 240, 4);
  // play video after 1s
  setTimeout(()=>{ video.currentTime=0; video.play().catch(()=>{}); }, 1000);
  // when video ends: show wish + fireworks again
  video.onended = ()=>{ setTimeout(()=>{
      wish.style.display='block'; wish.classList.add('show'); startFireworks(4000, 240, 4);
  }, 1000); };
}

/* ======= Personalize + buttons ======= */
(function personalize(){
  const p=new URLSearchParams(location.search); const name=p.get('name'); const msg=p.get('msg');
  if(name) document.getElementById('name').textContent=name;
  if(msg)  wish.textContent=decodeURIComponent(msg);
})();
document.getElementById('playBtn').addEventListener('click', ()=> video.play());
document.getElementById('replayBtn').addEventListener('click', startFlow);
window.addEventListener('load', startFlow);
</script>
</body>
</html>
